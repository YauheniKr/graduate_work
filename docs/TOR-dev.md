## Use cases
1. Пользователь покупает подписку (нужна ссылка на схему)
1. Пользователь возвращает деньги за подписку (нужна ссылка на схему)

## Functionals

На основе размышлений об [архитектуре](components.png)

1. Спроектировать внедрение информации о подписке в токен авторизации.
    1. В случае если подписка активирована, все текущие токены  должны стать недействительными, чтобы при обновлении пользователь получил токен с актуальной информацией о подписке.

1. Разработать систему управления счетами пользователей (PaymentGateway).
    1. Реализовать отдельный сервис для работы со счетами:
        1. Создание счета
        1. Предоставление информации о переходе в платежную систему
        1. **...?...** отмена счета или счета на возврат денег, или как отменить подписку?
        1. Предоставление администратору средства для просмотра выставленных счетов 

1. Разработать механизм покупки подписки через систему управления счетами
    1. Реализовать отдельный сервис, типа личного кабинета, или доработать сервис авторизации:
        1. Реализация API для создания счета на покупку плана и перевода пользователя на платежную систему
        2. Реализация API для получения информации об оплате счета, от системы управления счетами.

    1. Разработать механизм доставки информации о купленной подписке в сервис авторизации.
        1. Если за учет подписок будет отвечать личный кабинет, то необходимо чтобы сервис авторизации мог получить информацию о подписке пользователя.

## Not functionals
1. **...?...**